(function(t){function e(e){for(var a,r,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==i[s]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},i={app:0},o=[];function s(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-1c42bb46":"97f0177a","chunk-22c0879a":"4b1fcbf2","chunk-324d854a":"04e94380","chunk-4b8aec26":"28dcff85","chunk-e2f49838":"74fd9726"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-1c42bb46":1,"chunk-22c0879a":1,"chunk-324d854a":1,"chunk-e2f49838":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-1c42bb46":"98a08cce","chunk-22c0879a":"8d4c22d3","chunk-324d854a":"06b1868e","chunk-4b8aec26":"31d6cfe0","chunk-e2f49838":"854aaa17"}[t]+".css",i=c.p+a,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===a||l===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[t],f.parentNode.removeChild(f),n(o)},f.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"06d3":function(t,e,n){},"162e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},r=[],i=n("2877"),o={},s=Object(i["a"])(o,a,r,!1,null,null,null);e["default"]=s.exports},"29cd":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("d3b7");var a=n("c1fb"),r=n("8c1b"),i=n("4360");function o(t){i["a"].commit("UPDATE_AUTH",t.data)}function s(){window.localStorage.clear(),window.sessionStorage.clear(),i["a"].commit("CLEAR_AUTH")}function c(t){if(r["a"].isEmptyObject(t))throw new Error("empty authorize parameters ");return new Promise((function(e,n){a["a"].post("/oauth2/authorize",t).then((function(t){t&&t.succeeded?(o(t),e(t)):a["a"].ajaxError(t)})).catch((function(t){n(t)}))}))}function u(){return new Promise((function(t,e){a["a"].post("/oauth2/logout").then((function(e){e&&e.succeeded?(s(),t(e)):a["a"].ajaxError(e)})).catch((function(t){e(t)}))}))}e["b"]={authorize:c,logout:u}},"35ac":function(t,e,n){},"415c":function(t,e,n){"use strict";n("35ac")},4360:function(t,e,n){"use strict";n.d(e,"b",(function(){return S}));var a=n("2b0e"),r=n("2f62"),i=n("8c1b"),o=n("dd9a"),s={isAuthenticated:!1,access_token:null,expires_in:null,expires_at:null,expired:!0,userId:null,userName:null,nickName:null,avatarUrl:null,isUseMdEdit:!1};Object(i["e"])(localStorage.getItem(o["a"]))||(s=JSON.parse(localStorage.getItem(o["a"])));var c=Object.assign(s),u={state:c,getters:{auth:function(t){return{isAuthenticated:t.isAuthenticated&&!t.expired,access_token:t.access_token,expires_in:t.expires_in,expires_at:t.expires_at,expired:t.expired}},user:function(t){return{userId:t.userId,userName:t.userName,nickName:t.nickName,avatarUrl:t.avatarUrl,isUseMdEdit:t.isUseMdEdit}}},mutations:{UPDATE_AUTH:function(t,e){Object.assign(t,{isAuthenticated:!0,access_token:e.accessToken,userId:e.userId,userName:e.userName,nickName:e.nickName,avatarUrl:e.avatarUrl,isUseMdEdit:e.isUseMdEdit}),this.commit("UPDATE_EXPIRES",e.expiresIn)},UPDATE_TOKEN:function(t,e){t.access_token=e},UPDATE_EDITOR:function(t,e){t.isUseMdEdit=e},UPDATE_EXPIRES:function(t,e){t.expires_in=e;var n=window.parseInt(e);if("number"===typeof n&&n>0){var a=Date.now();t.expires_at=a+1e3*n}null!==t.expires_in&&(t.expired=t.expires_in<=0)},CLEAR_AUTH:function(t){Object.assign(t,{isAuthenticated:!1,access_token:null,expires_in:null,expires_at:null,expired:!0,userId:null,userName:null,nickName:null,avatarUrl:null,isUseMdEdit:!1})}},actions:{}},l=u,d=(n("4de4"),{options:[],activeIndex:"0",title:""}),f=Object.assign(d),h={state:f,getters:{getTitle:function(t){return t.title},getOptions:function(t){return t.options}},mutations:{add_tabs:function(t,e){t.options.push(e)},delete_tabs:function(t,e){t.options=t.options.filter((function(t){return t.route!==e}))},set_active_index:function(t,e){t.activeIndex=e},set_title:function(t,e){t.title=e}},actions:{}},p=h,m=(n("99af"),n("caad"),n("a15b"),n("b0c0"),n("d3b7"),n("ac1f"),n("2532"),n("5319"),n("1276"),n("f162")),g=n("7eab"),b=n("73f0"),v=n("162e");function _(t,e){window.sessionStorage.setItem(t,JSON.stringify(e))}function y(t){return JSON.parse(window.sessionStorage.getItem(t))}function E(t){var e=t.filter((function(t){if(!i["a"].isEmpty(t.path)){if("/"===t.path)t.component=b["default"];else if("-"===t.path)t.component=v["default"];else{var e=t.path.split("/").filter((function(t){return t.length>0}));if(t.name=e.join("_"),i["a"].isEmpty(t.component))t.children&&t.children.length>0&&(t.component=v["default"]);else try{t.component=Object(m["c"])(t.component.replace("/:id",""))}catch(n){try{t.component=Object(m["c"])("".concat(t.component.replace("/:id",""),".vue"))}catch(a){console.info("%c 当前路由 ".concat(t.component.replace("/:id",""),".vue 不存在，因此如法导入组件，请检查接口数据和组件是否匹配，并重新登录，清空缓存!"),"color:red")}}}return t.children&&t.children.length>0&&(t.children=E(t.children)),!0}return!1}));return e}var x={state:{isAddRoute:!1,routers:[],buttons:[]},getters:{permission_Routers:function(t,e){var n=t.routers;if(i["a"].isEmpty(n)||n.length<=0){var a="hx:router:".concat(e.user.userId),r=y(a);!i["a"].isEmpty(r)&&r.length>=0&&(n=m["a"].concat(r))}return n||[]},permission_Buttons:function(t,e){var n=t.buttons;if(i["a"].isEmpty(n)||n.length<=0){var a="hx:permission:".concat(e.user.userId),r=y(a);!i["a"].isEmpty(r)&&r.length>=0&&(n=r)}return n||[]},permission_IsAddRoute:function(t){return t.isAddRoute}},mutations:{SET_ISADDROUTE:function(t,e){t.isAddRoute=e},SET_ROUTERS:function(t,e){t.routers=e},SET_BUTTONS:function(t,e){t.buttons=e},CLEAR_ROUTERS:function(t){t.isAddRoute=!1,t.routers=[]}},actions:{hasPermission:function(t,e){var n=t.getters,a=n.permission_Buttons||[];return a.includes(e)},GenerateRoutes:function(t){var e=t.commit,n=t.getters;return new Promise((function(t,a){var r="hx:router:".concat(n.user.userId),o="hx:permission:".concat(n.user.userId),s=y(r),c=y(o);i["a"].isEmpty(s)||s.length<=0?g["a"].getRouters().then((function(n){if(n.succeeded){if(console.info("%c get routers from api succeed!","color:green"),s=n.data.routers,s&&s.length>0){_(r,s),s=E(s);var i=m["a"].concat(s);e("SET_ROUTERS",i)}c=n.data.buttons,c&&c.length>0&&(_(o,c),e("SET_BUTTONS",c)),t(s)}else a(n.data.message)})).catch((function(t){a(t)})):(console.info("%c get routers from sessionStorage succeed!","color:green"),s=E(s),t(s))}))}}},w=x;a["default"].use(r["a"]);var A=function(t){t.subscribe((function(t,e){localStorage.setItem(o["a"],JSON.stringify(e.auth)),localStorage.setItem(o["d"],e.auth.access_token),"CLEAR_AUTH"===t.type&&sessionStorage.clear()}))},k=new r["a"].Store({strict:!1,modules:{auth:l,tab:p,permission:w},plugins:[A]}),S=(e["a"]=k,function(){var t=Date.now(),e=window.parseInt(k.getters.auth.expires_at),n=window.parseInt(k.getters.auth.expires_in),a=60;t<=e?k.commit("UPDATE_EXPIRES",n+a):k.commit("UPDATE_EXPIRES",-1)})},4645:function(t,e,n){"use strict";n("99af"),n("d3b7"),n("96cf");var a=n("1da1"),r=n("d4ec"),i=n("bee2"),o=n("262e"),s=n("2caf"),c=n("dd17"),u=n.n(c),l=n("bc3a"),d=n.n(l),f=n("dd9a");u.a.Log.logger=console,u.a.Log.level=u.a.Log.DEBUG;var h="http://118.31.119.35:8000/auth",p=function(t){Object(o["a"])(n,t);var e=Object(s["a"])(n);function n(){return Object(r["a"])(this,n),e.call(this,{authority:h,client_id:"blogadminjs",redirect_uri:"".concat(window.location.origin,"/callback"),response_type:"id_token token",scope:"blog.core.api openid profile roles",post_logout_redirect_uri:"".concat(window.location.origin)})}return Object(i["a"])(n,[{key:"signIn",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.signinRedirect();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"signOut",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.signoutRedirect().then((function(t){console.log("signed out",t)})).catch((function(t){console.log(t)})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getProfile",value:function(){var t=this;return new Promise((function(e,n){t.getUser().then((function(n){return null===n?(t.signIn(),e(null)):e(n.profile)})).catch((function(t){return console.log(t),n(t)}))}))}},{key:"getAcessToken",value:function(){var t=this,e=this;return new Promise((function(n,a){t.getUser().then((function(t){return null===t?(e.signIn(),n(null)):n(t.access_token)})).catch((function(t){return console.log(t),a(t)}))}))}},{key:"getRole",value:function(){var t=this,e=this;return new Promise((function(n,a){t.getUser().then((function(t){return null===t?(e.signIn(),n(null)):n(t.profile.role)})).catch((function(t){return console.log(t),a(t)}))}))}},{key:"refreshToken",value:function(){var t=this,e=this;return new Promise((function(n,a){t.signinSilent().then((function(t){if(null!==t)return n(t);e.signIn(null)})).catch((function(t){return console.log(t),a(t)}))}))}}]),n}(u.a.UserManager),m=new p;m.events.addUserLoaded((function(t){console.log("New User Loaded：",t),console.log("Acess_token: ",t.access_token),d.a.defaults.headers.common.Authorization="".concat(f["e"]).concat(t.access_token)})),m.events.addAccessTokenExpiring((function(){console.log("AccessToken Expiring：",arguments)})),m.events.addAccessTokenExpired((function(){console.log("AccessToken Expired：",arguments),m.signoutRedirect().then((function(t){console.log("signed out",t)})).catch((function(t){console.log(t)}))})),e["a"]=m},5620:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.$route.meta&&t.$route.meta.notab?n("router-view"):n("multi-layout")],1)},i=[],o={name:"App",data:function(){return{}}},s=o,c=(n("034f"),n("2877")),u=Object(c["a"])(s,r,i,!1,null,null,null),l=u.exports,d=n("5c96"),f=n.n(d),h=(n("0fae"),n("f162")),p=n("4360"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{class:t.isMiniLayout?"hx-aside-mini":""},[n("slider-menu",{attrs:{menus:t.menus,multiExpand:t.multiExpand},on:{"switch-menu":t.doSwitchMenu}}),n("el-container",{staticClass:"hx-body"},[n("layout-navbar"),n("el-main",[n("layout-main")],1)],1)],1)},g=[],b=n("5530"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-aside",{staticClass:"hx-aside",style:t.isMiniLayout?"width: 3.75rem;":"width: 14rem;"},[n("div",{staticClass:"hx-brand"},[n("div",{staticClass:"hx-brand-logo"}),n("button",{staticClass:"hx-brand-toggler hx-thin-toggler",attrs:{type:"button"},on:{click:t.doSwitchMenu}},[n("span",{staticClass:"hx-brand-toggler-icon"})])]),n("el-scrollbar",{staticClass:"hx-aside-scrollbar",attrs:{"wrap-class":""}},[n("el-menu",{staticClass:"hx-menu",attrs:{collapse:t.isMiniLayout,"default-active":t.$route.path,"unique-opened":!t.multiExpand,"active-text-color":"#ffd04b","background-color":"#3b3e47",router:"","text-color":"#fff"}},t._l(t.menus,(function(t,e){return n("side-menu-item",{key:e,attrs:{"base-path":t.path,item:t}})})),1)],1)],1)},_=[],y=(n("a15b"),n("8c1b")),E=n("df7c"),x=n.n(E),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item.hidden?t._e():n("div",[t.item.children&&t.item.children.length>0?n("el-submenu",{ref:"submenu",attrs:{index:t.resolvePath(t.item.path)}},[t.item.meta?n("template",{slot:"title"},[n("i",{class:t.item.meta.icon}),n("span",[t._v(t._s(t.item.meta.title))])]):t._e(),t._l(t.item.children,(function(e){return[e.hidden?t._e():n("div",{key:e.path},[e.children&&e.children.length>0?n("sidebar-item",{key:e.path,staticClass:"nest-menu",attrs:{"base-path":t.resolvePath(e.path),"is-nest":!0,item:e}}):n("el-menu-item",{key:e.path,attrs:{index:e.path}},[n("i",{class:e.meta.icon}),t._v(" "+t._s(e.meta.title)+" ")])],1)]}))],2):n("el-menu-item",{attrs:{index:t.item.path}},[t.item.meta?n("i",{class:t.item.meta.icon}):t._e(),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.title))])])],1)},A=[],k={name:"SideMenuItem",props:{item:{type:Object,required:!0},basePath:{type:String,default:""}},data:function(){return{onlyOneChild:null}},methods:{resolvePath:function(t){return this.isExternalLink(t)?t:x.a.resolve(this.basePath,t)},isExternalLink:function(t){return Object(y["g"])(t)}}},S=k,O=Object(c["a"])(S,w,A,!1,null,null,null),P=O.exports,T={name:"slider-menu",components:{SideMenuItem:P},props:{menus:{type:Array,required:!0,default:function(){return[]}},multiExpand:{type:Boolean,default:!1},isMini:{type:Boolean,default:!1}},data:function(){return{isMiniLayout:this.isMini,lastMenuOpenedIdx:-1,lastMiniMenuOpenedIdx:-1,routes:this.menus}},currentActived:null,mounted:function(){console.log(this)},methods:{doSwitchMenu:function(){this.isMiniLayout=!this.isMiniLayout,this.$emit("switch-menu",this.isMiniLayout)},onNavClick:function(t,e){var n=this,a=t.meta.title;Object(y["f"])(e)||(a=e.meta.title),n.$store.commit("set_title",a)},popoverHide:function(t,e){this.$root.$emit("bv::hide::popover",t),this.lastMiniMenuOpenedIdx>=0&&this.$set(this.isMiniMenuOpen,this.lastMiniMenuOpenedIdx,!1),this.$set(this.isMiniMenuOpen,e,!0),this.lastMiniMenuOpenedIdx=e},pathJoin:function(){return x.a.join.apply(x.a,arguments)}}},C=T,I=Object(c["a"])(C,v,_,!1,null,null,null),j=I.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"hx-main",attrs:{role:"main"}},[n("layout-tab"),n("div",{staticClass:"hx-content"},[t.$route.meta&&t.$route.meta.keepAlive?n("keep-alive",[n("router-view")],1):n("router-view")],1)],1)},U=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showTab?n("div",{staticClass:"hx-tabs-fix bg-white pt-2"},[n("el-tabs",{attrs:{closable:t.allTabs.length>1,type:"card"},on:{"tab-click":t.tabClick,"tab-remove":t.removeTab},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.allTabs,(function(e,a){return n("el-tab-pane",{key:"tab-"+a,staticClass:"hx-tabs",attrs:{name:e.route}},[n("span",{attrs:{slot:"label"},slot:"label"},[t.isEmpty(e.icon)?t._e():n("i",{class:e.icon}),t._v(" "+t._s(e.title)+" ")])])})),1)],1):t._e()},M=[],N=(n("4160"),n("b0c0"),n("159b"),{name:"layout-tab",props:{showTab:{type:Boolean,default:!0}},data:function(){return{}},methods:{isEmpty:y["e"],tabClick:function(t){this.$router.push({path:t.name})},removeTab:function(t){var e=this,n=e.allTabs,a=e.activeIndex;a===t&&(n.forEach((function(e,r){if(e.route===t){var i=n[r+1]||n[r-1];i&&(a=i.route)}})),e.activeIndex=a,e.$router.push({path:a})),e.$store.commit("delete_tabs",t)}},watch:{$route:function(t){for(var e=this,n=t.path,a=!1,r=0,i=e.allTabs.length;r<i;r++){var o=e.allTabs[r];if(!a&&o.route===n){a=!0,e.activeIndex=o.route;break}}if(!a){var s={route:n,title:t.meta.title,icon:t.meta.icon};this.$store.commit("add_tabs",s),e.activeIndex=s.route}}},computed:{allTabs:function(){return this.$store.state.tab.options},activeIndex:{get:function(){return this.$store.state.tab.activeIndex},set:function(t){this.$store.commit("set_active_index","".concat(t))}}}}),$=N,D=Object(c["a"])($,R,M,!1,null,null,null),H=D.exports,B={name:"layout-main",components:{LayoutTab:H}},z=B,V=Object(c["a"])(z,L,U,!1,null,null,null),q=V.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-header",{staticClass:"hx-navbar hx-fiexd-top"},[n("el-dropdown",{attrs:{size:"medium",trigger:"click",type:"primary"},on:{command:t.handleCommand}},[n("el-button",[t._v(" 设置 - "+t._s(t.nickName)+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{staticStyle:{"min-width":"8rem"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"/user/setting"}},[t._v("个人设置")]),n("el-dropdown-item",{attrs:{command:"logout"}},[t._v("注销")])],1)],1)],1)},J=[],Q=n("b85c"),F=n("29cd"),X={name:"layout-navbar",props:{theme:String,type:String,variant:String},data:function(){return{nickName:this.$store.getters.user.nickName,isLeftIcon:!1}},computed:{},methods:{getChildrenRoutes:function(t){var e,n=Object(Q["a"])(this.$router.options.routes);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.name===t.name&&a.path===t.path)return a.children}}catch(r){n.e(r)}finally{n.f()}return[]},handleCommand:function(t){var e=this;"logout"===t?F["b"].logout().then((function(){e.$store.commit("CLEAR_AUTH"),e.$store.commit("CLEAR_ROUTERS"),e.$router.push("/login")})):e.$router.push(t)}}},K=X,W=(n("415c"),Object(c["a"])(K,G,J,!1,null,"3125c0d4",null)),Y=W.exports,Z=n("2f62"),tt={name:"multi-left-layout",props:{theme:String},data:function(){return{multiExpand:!0,isMiniLayout:!1}},methods:{doSwitchMenu:function(t){this.isMiniLayout=t}},computed:Object(b["a"])({},Object(Z["b"])({menus:"permission_Routers"})),components:{SliderMenu:j,LayoutMain:q,LayoutNavbar:Y}},et=tt,nt=(n("b3b0"),Object(c["a"])(et,m,g,!1,null,null,null)),at=nt.exports,rt=function(t){t.component("multi-layout",at)},it=rt,ot=n("a78e"),st=n.n(ot),ct=(n("c740"),function(t){t.directive("permission",{inserted:function(t,e){function n(t){if(Object(y["e"])(t))return!1;var e=p["a"].getters.permission_Buttons||[],n=e.findIndex((function(e){return e.toLocaleLowerCase()===t.toLocaleLowerCase()}));return n>=0}n(e.value)||t.parentNode.removeChild(t)}})}),ut=ct,lt=(n("f9e3"),n("a384"),n("c1fb")),dt=n("b2d8"),ft=n.n(dt);n("64e1");a["default"].prototype.$api=lt["a"],a["default"].use(f.a),a["default"].use(it),a["default"].use(ut),st.a.set("test","123123213"),a["default"].config.productionTip=!1,a["default"].use(ft.a),a["default"].use(ut);var ht=new a["default"]({store:p["a"],router:h["b"],render:function(t){return t(l)}});ht.$mount("#app");e["default"]=ht},"73f0":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"welcome-card note mx-3"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("30天内接口访问情况")])]),n("el-col",{staticClass:"echarts-item",attrs:{span:24}},[n("ve-line",{attrs:{data:t.chartData,extend:t.extend,settings:t.chartSettings}})],1)],1),n("el-card",{staticClass:"welcome-card m-3"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("访问日志")])]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLogLoading,expression:"isLogLoading"}],staticStyle:{width:"100%","font-size":"12px"},attrs:{data:t.logsData,border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"访问者",prop:"operater",width:"100px"}}),n("el-table-column",{attrs:{align:"center",label:"请求地址",prop:"ipAddress",width:"100px"}}),n("el-table-column",{attrs:{align:"center",label:"请求时间",prop:"operateTime",width:"135px"}}),n("el-table-column",{attrs:{"header-align":"center",label:"访问接口",prop:"url",width:"250"}}),n("el-table-column",{attrs:{align:"center",label:"请求方式",prop:"httpMethod",width:"65"}}),n("el-table-column",{attrs:{align:"center",label:"耗时(毫秒)",prop:"elapsedTime",width:"65"}}),n("el-table-column",{attrs:{"header-align":"center",label:"请求参数",prop:"param","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{"header-align":"center",label:"Agent",prop:"agent","show-overflow-tooltip":"",width:"180"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"执行成功",prop:"isEnabled",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.success?"success":"danger","disable-transitions":""}},[t._v(t._s(e.row.success?"成功":"失败"))])]}}])})],1),n("div",{staticClass:"d-flex justify-content-end align-items-center"},[n("el-pagination",{attrs:{"current-page":t.logQueryParam.PageIndex,"page-size":t.logQueryParam.PageSize,total:t.logsTotalCount,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.logQueryParam,"PageIndex",e)},"update:current-page":function(e){return t.$set(t.logQueryParam,"PageIndex",e)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),n("br")],1),n("el-card",{staticClass:"mx-3"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("相关配置")])]),n("el-aside",[t._v("1、动态添加一个vue页面：")]),n("br"),n("div",{staticClass:"text item"},[n("i",{staticClass:"el-icon-edit"}),t._v("、更多内容，查看博客园文档： "),n("a",{attrs:{href:"https://www.cnblogs.com/laozhang-is-phi/p/10643993.html#autoid-2-6-0",target:"_blank"}},[t._v("https://www.cnblogs.com/laozhang-is-phi/p/10643993.html#autoid-2-6-0")]),t._v("。 ")]),n("br"),n("hr"),n("br"),n("el-aside",[t._v("2、快速配置接口权限：")]),n("br"),n("div",{staticStyle:{height:"300px","overflow-y":"auto"}},[n("el-steps",{attrs:{direction:"vertical"}},[n("el-step",{attrs:{description:"创建一个测试控制器 DemoController",title:"步骤 1"}}),n("el-step",{attrs:{description:"修改接口路由地址，带上 [action] ，比如，/api/[controller]/[action]，编译是否正常",title:"步骤 2"}}),n("el-step",{attrs:{description:"给需要加权限的路由api上，增加授权特性[[Authorize(Permissions.Name)]]",title:"步骤 3"}}),n("el-step",{attrs:{description:"测试 /api/demo/get 接口，是否已经被保护",title:"步骤 4"}}),n("el-step",{attrs:{description:"vueadmin 后台 配置权限：第一步：登录后台，新建api接口",title:"步骤 5.1"}}),n("el-step",{attrs:{description:"第二步：添加一个菜单，可以是一个查询按钮，也可以是一个路由页面",title:"步骤 5.2"}}),n("el-step",{attrs:{description:"第三步：权限分配！勾选角色和刚刚的菜单",title:"步骤 5.3"}}),n("el-step",{attrs:{description:"如果后端netcore资源服务器有缓存，记得清理",title:"步骤 6"}}),n("el-step",{attrs:{description:"重新登录Admin管理后台，访问接口，查看是否有权限",title:"步骤 7"}})],1)],1)],1)],1)},r=[],i=(n("99af"),n("c3da")),o=n.n(i),s=n("c1fb"),c="/admin/api/home",u={getLineData:function(t){return s["a"].post("".concat(c,"/GetLineData"),t)},getLogsPage:function(t){return s["a"].post("".concat(c,"/GetLogsPage"),t)}},l=n("1a9a"),d={name:"Welcome",components:{VeLine:o.a},data:function(){return{baseUrl:"http://118.31.119.35:8000/badmin",listLoading:!1,welcomeInitData:{},logsData:[],isLogLoading:!1,logsTotalCount:0,logQueryParam:{pageIndex:1,pageSize:5,sortKey:"",sortType:0,isWelCome:!0},serverInfo:{},extend:{series:{label:{normal:{show:!0}}}},chartData:{columns:[],rows:[],today:0},chartSettings:{metrics:["count"],dimension:["name"],legendName:{count:"访问次数"}},connection:""}},methods:{getBck:function(t){return"background: rgb(".concat(43+20*t,", ").concat(148+10*t,", 255) none repeat scroll 0% 0%;")},handleCurrentChange:function(t){this.logQueryParam.PageIndex=t,this.getLogsList()},handleSizeChange:function(t){this.logQueryParam.PageSize=t,this.getLogsList()},getLogsList:function(){var t=this;u.getLogsPage(t.logQueryParam).then((function(e){t.logsTotalCount=e.data.totalCount,t.logsData=e.data.items}))},getLineData:function(){var t=this;u.getLineData().then((function(e){t.chartData=e.data}))},buildConnection:function(){var t=this;this.connection=(new l["a"]).withUrl("".concat(t.baseUrl,"/badmin/api/chathub"),{accessTokenFactory:function(){return t.$store.getters.auth.access_token}}).configureLogging(l["b"].Information).build(),t.connection.start().then((function(){console.log("连接成功")})),t.connection.on("ReceiveUpdate",(function(t){console.info("update ReceiveUpdate success!",t)})),t.connection.on("ReceiveMessage",(function(t,e){console.info("update ReceiveMessage success!",t,e)}))}},created:function(){this.getLogsList(),this.getLineData(),this.buildConnection()}},f=d,h=(n("b0d2"),n("f8fe"),n("2877")),p=Object(h["a"])(f,a,r,!1,null,"7d605dc4",null);e["default"]=p.exports},"7b69":function(t,e,n){},"7eab":function(t,e,n){"use strict";var a=n("c1fb"),r="/admin/api/permission";e["a"]={getList:function(){return a["a"].get("".concat(r,"/getList"))},add:function(t){return a["a"].post("".concat(r,"/add"),t)},getDetail:function(t){return a["a"].get("".concat(r,"/get/").concat(t))},update:function(t){return a["a"].post("".concat(r,"/Update"),t)},del:function(t){return a["a"].del("".concat(r,"/Delete/").concat(t))},getRouters:function(){return a["a"].get("".concat(r,"/GetRouters"))},getUserMenuTree:function(){return a["a"].get("".concat(r,"/GetUserMenuTree"))}}},"85ec":function(t,e,n){},"8c1b":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return h})),n.d(e,"h",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"g",(function(){return b}));n("99af"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("5319");var a=function(t){return"string"===typeof t},r=function(t){return"isArray"in Array?Array.isArray(t):"[object Array]"===toString.call(t)},i=function(t,e){return void 0===t||null===t||!e&&""===t||r(t)&&0===t.length},o=function(t){return"[object Object]"===toString.call(null)?null!==t&&"[object Object]"===toString.call(t)&&void 0===t.ownerDocument:"[object Object]"===toString.call(t)},s=function(t){return t instanceof Object&&t.constructor===Object},c=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},u=function(t){return"boolean"===typeof t},l=function(t){return"number"===typeof t&&isFinite(t)},d=function(t){return"undefined"!==typeof document&&"function"===typeof document.getElementsByTagName("body")?!!t&&"[object Function]"===toString.call(t):!!t&&"function"===typeof t};function f(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var h=function(){return"".concat(f()+f(),"-").concat(f(),"-").concat(f(),"-").concat(f()+f()+f())};function p(t,e){var n=new Date(t);i(e)&&(e="yyyy-MM-dd");var a={"M+":n.getMonth()+1,"d+":n.getDate(),"H+":n.getHours(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,"".concat(n.getFullYear()).substr(4-RegExp.$1.length))),a)new RegExp("(".concat(r,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[r]:"00".concat(a[r]).substr("".concat(a[r]).length)));return e}function m(t,e){var n="",a=t;if(e&&o(t)&&(a=JSON.stringify(t)),!i(a)){a=a.toString();for(var r=0;r<a.length;r++){var s=a.charCodeAt(r).toString(16);1===s.length?s="0".concat(s,"00"):2===s.length?s="".concat(s,"00"):3===s.length?s="".concat(s.substring(1,3),"0").concat(s.substring(0,1)):4===s.length&&(s=s.substring(2,4)+s.substring(0,2)),n+=s}}return n.toLowerCase()}function g(t,e){var n="";if(!i(t)){t=t.toString();for(var a=0;a<t.length;a+=4)n+=String.fromCharCode("0x".concat(t.substring(a+2,a+4)).concat(t.substring(a,a+2)))}return!i(n)&&e?JSON.parse(n):n}function b(t){return/^(https?:|mailto:|tel:)/.test(t)}e["a"]={isString:a,isEmpty:i,isArray:r,isBoolean:u,isFunction:d,isNumber:l,isObject:o,isSimpleObject:s,isEmptyObject:c,guid:h,dateFormat:p,isExternal:b,toHex:m,formHex:g}},a384:function(t,e,n){},b0d2:function(t,e,n){"use strict";n("7b69")},b3b0:function(t,e,n){"use strict";n("5620")},c1fb:function(t,e,n){"use strict";n("99af"),n("d3b7"),n("498a");var a=n("bc3a"),r=n.n(a),i=n("4328"),o=n.n(i),s=n("8c1b"),c=n("dd9a"),u=n("f162"),l=n("4360"),d=n("2b0e");r.a.defaults.baseURL="http://118.31.119.35:8000/badmin",r.a.defaults.timeout=3e4,r.a.defaults.withCredentials=!0;var f=function(t){d["default"].prototype.$message({message:t,type:"error"})};function h(t){l["a"].commit("UPDATE_AUTH",t.data)}function p(t){for(var e in t)s["a"].isEmpty(t[e])&&delete t[e],s["a"].isString(t[e])?t[e]=t[e].trim():(s["a"].isObject(t[e])||s["a"].isArray(t[e]))&&(t[e]=p(t[e]));return t}function m(t,e){return s["a"].isEmpty(e)||(e=p(e)),new Promise((function(n,a){r.a.get(t,{params:e}).then((function(t){n(t)})).catch((function(t){a(t)}))}))}function g(t,e,n){return s["a"].isEmpty(e)||(e=p(e)),new Promise((function(a,i){r.a.post(t,e,n).then((function(t){a(t)})).catch((function(t){i(t)}))}))}function b(t,e){return s["a"].isEmpty(e)||(e=p(e)),new Promise((function(n,a){r.a.put(t,o.a.stringify(e)).then((function(t){n(t)})).catch((function(t){a(t)}))}))}function v(t,e){return s["a"].isEmpty(e)||(e=p(e)),new Promise((function(n,a){r.a.delete(t,e).then((function(t){n(t)})).catch((function(t){a(t)}))}))}function _(t){if(t){var e,n;if(t.isAxiosError?(e=t.response,s["a"].isEmptyObject(e)&&"Network Error"===t.message&&(n="请求出错，服务器异常")):e=t,e){var a=e.data;a&&a.hasOwnProperty("succeeded")?a.succeeded||(n=a.message||e.statusText||t.message):n=e.statusText}f(n||"服务器忙，请稍后重试!")}}function y(t){if(c["b"])Object(u["d"])();else if(l["a"].getters.auth.expired)Object(u["d"])();else{var e=l["a"].getters.auth.access_token,n=o.a.stringify({token:e});r()({headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",url:c["c"],data:n}).then((function(e){if(e&&e.succeeded)return h(e),t.__isRetryRequest=!0,t.headers.Authorization="".concat(e.data.token_type," ").concat(e.data.access_token),r()(t);Object(u["d"])()}))}}r.a.interceptors.request.use((function(t){s["a"].isEmpty(t.url)||(t.url=t.url.toLocaleLowerCase());var e=l["a"].getters.auth.access_token,n=l["a"].getters.auth.expired;return e&&!n&&(t.headers.Authorization="Bearer ".concat(e)),Object(l["b"])(),t}),(function(t){return Promise.reject(t)})),r.a.interceptors.response.use((function(t){return!1===t.data.succeeded?(401===t.data.statusCode?(t.isHandleError=!0,y(t.config)):403===t.data.statusCode?(t.isHandleError=!0,f(t.data.message||"您没有该操作的权限!")):99991!==t.data.statusCode&&(t.isHandleError=!0,_(t)),Promise.reject(t)):t.data}),(function(t){var e=t.response||{},n=e.data||{};switch(e&&e.status){case 401:y(t.config);break;case 403:f(n.message||"您没有该操作的权限!");break;case 500:f(n.message||"服务器异常!");break;default:break}return Promise.reject(t)})),e["a"]={get:m,post:g,put:b,del:v,ajaxError:_}},dd9a:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var a="/oauth2/refreshtoken",r="HX.LOCALSTORAGE.ACCESSTOKEN",i="Bearer ",o="HX.LOCALSTORAGE.AUTH",s=!0===Object({NODE_ENV:"production",VUE_APP_ATTACH_API:"http://118.31.119.35:8000/badmin",VUE_APP_Authority:"http://118.31.119.35:8000/auth",VUE_APP_BASE_API:"http://118.31.119.35:8000/badmin",VUE_APP_IS_IDS4:"true",VUE_APP_VERSION:"0.0.2",BASE_URL:"/"}).VUE_APP_Enabled_IDS4||"true"===Object({NODE_ENV:"production",VUE_APP_ATTACH_API:"http://118.31.119.35:8000/badmin",VUE_APP_Authority:"http://118.31.119.35:8000/auth",VUE_APP_BASE_API:"http://118.31.119.35:8000/badmin",VUE_APP_IS_IDS4:"true",VUE_APP_VERSION:"0.0.2",BASE_URL:"/"}).VUE_APP_Enabled_IDS4},f162:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return m}));n("d3b7"),n("2ca0");var a=n("5530"),r=n("2b0e"),i=n("8c4f"),o=n("4360"),s=n("4645"),c=n("dd9a"),u=i["a"].prototype.push;i["a"].prototype.push=function(t,e,n){return e||n?u.call(this,t,e,n):u.call(this,t).catch((function(t){return t}))},r["default"].use(i["a"]);var l=[{path:"/",alias:"/welcome",name:"welcome",component:function(){return Promise.resolve().then(n.bind(null,"73f0"))},meta:{requireAuth:!0,title:"欢迎页",icon:"el-icon-s-home"}},{name:"usersetting",path:"/user/setting",component:function(){return n.e("chunk-1c42bb46").then(n.bind(null,"4852"))},hidden:!0,meta:{title:"个人设置",requireAuth:!0}},{name:"login",path:"/login/:redirect?",component:function(){return n.e("chunk-22c0879a").then(n.bind(null,"dd7b"))},hidden:!0,meta:{title:"登录",notab:!0,requireAuth:!1}},{name:"callback",path:"/callback",component:function(){return n.e("chunk-4b8aec26").then(n.bind(null,"504a"))},hidden:!0,meta:{notab:!0,requireAuth:!1}},{name:"404",path:"/404",component:function(){return n.e("chunk-e2f49838").then(n.bind(null,"8cdb"))},hidden:!0,meta:{notab:!0,requireAuth:!1}}],d=function(){return new i["a"]({routes:l})},f=d();function h(t){if(o["a"].commit("CLEAR_AUTH"),c["b"])s["a"].signIn().catch((function(){console.info("The redirect login also failed!","color:red")}));else{var e={path:"/login",query:{redirect:f.path}};t?t(e):f.push(e)}}function p(){var t=d();f.matcher=t.matcher}f.beforeEach((function(t,e,n){t.meta&&t.meta.title&&(document.title=t.meta.title),!1===t.meta.requireAuth?n():o["a"].getters.auth.isAuthenticated?o["a"].getters.permission_IsAddRoute?n():o["a"].dispatch("GenerateRoutes").then((function(e){p(),f.addRoutes(e),o["a"].commit("SET_ISADDROUTE",!0),n(Object(a["a"])(Object(a["a"])({},t),{},{replace:!0}))})):h(n)})),e["b"]=f;var m=function(t){return t.startsWith("/")&&(t=t.substring(1)),function(e){return n.e("chunk-324d854a").then(function(){var a=[n("4b3b")("./".concat(t))];e.apply(null,a)}.bind(this)).catch(n.oe)}}},f8fe:function(t,e,n){"use strict";n("06d3")}});
//# sourceMappingURL=app.150e07a7.js.map